(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-121ae9a8"],{"3bea":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("span",{staticClass:"title"},[t._v("\n   欢迎登录\n  ")]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{placeholder:"账号",type:"text"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"密码",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.loginToDo(e):null}}})]),o("div",{staticStyle:{"text-align":"center"}},[o("button",{staticClass:"login",attrs:{type:"primary"},on:{click:t.loginToDo}},[t._v("登录")])])])},a=[],s=(o("a481"),o("88d8")),i=(o("7f7f"),o("e7e5"),o("d399")),c=(o("cadf"),o("551c"),o("097d"),o("07a4")),r={data:function(){return{account:"",password:""}},components:Object(s["a"])({},i["a"].name,i["a"]),created:function(){this.isLogin(),console.log(this.$route)},methods:{isLogin:function(){var t=localStorage.getItem("token");"null"!==t&&null!==t&&""!==t&&this.$router.push("/home")},loginToDo:function(){var t=this,e={name:this.account,password:this.password},o=this.$http.sign.login(e);return o.then(function(e){if(e.success){localStorage.setItem("token",e.token),c["a"].commit("loginSuccess",e.token);var o=t.$http.todolist.getUserInfo();c["a"].commit("setUserInfo",o.id,o.name),i["a"].success("登录成功！");var n=t.$route.query.redirect;n?t.$router.replace(n):t.$router.replace("/")}else i["a"].fail(e.info),localStorage.setItem("token",null),c["a"].commit("loginSuccess",null)},function(t){console.log(t),i["a"].fail("请求错误！"),localStorage.setItem("token",null),c["a"].commit("loginSuccess",null)}),o}}},l=r,u=(o("a7af"),o("2877")),p=Object(u["a"])(l,n,a,!1,null,"d5c26d64",null);p.options.__file="ToLogin.vue";e["default"]=p.exports},4822:function(t,e,o){},a7af:function(t,e,o){"use strict";var n=o("4822"),a=o.n(n);a.a}}]);